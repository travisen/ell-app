################# INSERT PEOPLE ################# 
INSERT INTO person (first_name, last_name, username, email)
  VALUES ('Tony', 'Tiger', 'tonyt1', 'tonyt1@email.com');

INSERT INTO person (first_name, last_name, username, email)
  VALUES ('Travis', 'Nykaza', 'nykazat1', 'travis.nykaza@gmail.com');

INSERT INTO person (first_name, last_name, username, email)
  VALUES ('Jon', 'Snow', 'snowj1', 'jon_snow@hotmail.com');

INSERT INTO person (first_name, last_name, username, email)
  VALUES ('Sansa', 'Stark', 'starks1', 'sstart239@unc.org');


################# INSERT PLACES ################# 

INSERT INTO place (
    name, place_type, street_address, zipcode,
    description, phone, cost)
    VALUES ( 'Nina''s', 'eat', '602 New York St', '18679',
     'A place to eat awseome wings though :)', '15709999999', '$'
);

INSERT INTO place (
    name, place_type, street_address,
    description, phone, cost)
    VALUES ( 'Nay Aug Park', 'play', '500 Arthur Ave',
    'A gorgeous park where you can hike, ball or have a cookout!',
    '5703484137', 'free'
);

INSERT INTO place (
    name, place_type, street_address, city, state, zipcode, country,
    description, phone, cost) VALUES (
    'Generic Place to Shop', 'shop', '800 Awesome Rd', 'New York', 'New York',
    '10001', 'United States', 'a place in nyc to shop!!!!! #$&*(*(#',
    '14449239999', '$$$'
);

################# INSERT ADMIN ################# 


INSERT INTO admin (first_name, last_name, username, password, email)
  VALUES ('Travis', 'Nykaza', 'nykazat1', 'insecuretest',
   'travis.nykaza@gmail.com');

################# INSERT BAD EMAIL TEST ################# 

INSERT INTO person (first_name, last_name, username, email)
  VALUES ('bad', 'bad', 'bat1','travi-__-2-2s.nyk#%#@@@@mail.com');

-- INSERT INTO place (
--     name, place_type, street_address, city, state, zipcode, country,
--     description, phone, cost)

################# ALTERING COLUMNS ################# 

ALTER TABLE place_hours
ALTER COLUMN close_time SET DATA TYPE time;

ALTER TABLE place_hours
ALTER COLUMN close_time SET DATA TYPE time;

ALTER TABLE place_hours ADD CONSTRAINT
constraint_name UNIQUE (day);


DELETE FROM place_hours
WHERE place_hours.id = 2;

################# PLACE HOURS ################# 
INSERT INTO place_hours (
    place_id, day, open_time, close_time)
    VALUES (1, 0, '12:00:00', '20:00:00'),
    (1, 1, '12:00:00', '20:00:00'),
    (1, 2, '15:00:00', '22:00:00'),
    (1, 3, '16:00:00', '22:00:00'),
    (1, 4, '17:00:00', '22:00:00'),
    (1, 5, '18:00:00', '22:00:00'),
    (1, 6, '19:00:00', '22:00:00');

INSERT INTO place_hours (
    place_id, day, open_time, close_time)
    VALUES (2, 0, '10:00:00', '20:00:00'),
    (2, 1, '10:00:00', '20:00:00'),
    (2, 2, '10:00:00', '20:00:00'),
    (2, 3, '10:00:00', '20:00:00'),
    (2, 4, '10:00:00', '20:00:00'),
    (2, 5, '10:00:00', '20:00:00'),
    (2, 6, '10:00:00', '20:00:00');

SELECT open_time, close_time
FROM place_hours
WHERE place_hours.place_id = 1;

################# INSERT VISITS ################# 

INSERT INTO person_visit(
    person_id, place_id, visited_on)
	VALUES(1, 1, '2017-6-17');

INSERT INTO person_visit(
    person_id, place_id, visited_on)
	VALUES(1, 2, '2017-6-24');

INSERT INTO person_visit(
    person_id, place_id, visited_on)
	VALUES(2, 2, '2017-6-24');

#shouldn't add
INSERT INTO person_visit(
    person_id, place_id, visited_on)
	VALUES(2, 2, '2017-6-24');

#Drop all tables in a schema named public
DROP SCHEMA public CASCADE;
CREATE SCHEMA public;
#Restore default grants
GRANT ALL ON SCHEMA public TO postgres;
GRANT ALL ON SCHEMA public TO public;

#################### QUERIES #####################
#Get first 10 enteries with type play
SELECT name, street_address, cost
FROM PLACE
WHERE place_type = 'play'
LIMIT 10;

#Get first 10 enteries with type play starting at row 5
SELECT name, street_address, cost
FROM PLACE
WHERE place_type = 'play'
LIMIT 10 OFFSET 5;

SELECT name, street_address, cost
FROM PLACE
WHERE place_type = 'eat'
LIMIT 10;

SELECT name, street_address, cost
FROM PLACE
WHERE place_type = 'shop'
LIMIT 10;

SELECT name, street_address, cost
FROM PLACE
WHERE place_type = 'other'
LIMIT 10;

#Get Details for a specific place description is 255chars max
SELECT name, street_address, description, phone
FROM PLACE
WHERE place_type = 'play' AND name = 'Nay Aug Park';

#Figure out how to parameterize input to prevent
#sql injection
INSERT INTO place (
    name, place_type, street_address, city, state, zipcode, country,
    description, phone, cost) VALUES (
    '', '', '', '', '',
    '', '', '',
    '', 
);
# Order by most recent first

SELECT *
FROM person_visit
ORDER BY "visited_on" DESC;

# Get first and last name of visitor and where they visited, most recent
SELECT person_visit.id, person.first_name, person.last_name, place.name , person_visit.visited_on
FROM person_visit INNER JOIN
person ON person_visit.person_id = person.id INNER JOIN
place ON person_visit.place_id = place.id
ORDER BY person_visit.visited_on DESC;

#alphabetica asc first name
SELECT person_visit.id, person.first_name, person.last_name, place.name ,person_visit.visited_on
FROM person_visit INNER JOIN
person ON person_visit.person_id = person.id INNER JOIN
place ON person_visit.place_id = place.id
ORDER BY person.first_name ASC;

#alpha asc last name
SELECT person_visit.id, person.first_name, person.last_name, place.name ,person_visit.visited_on
FROM person_visit INNER JOIN
person ON person_visit.person_id = person.id INNER JOIN
place ON person_visit.place_id = place.id
ORDER BY person.last_name ASC;

#Remove visit with id.
#id will be a hidden column
DELETE FROM person_visit
WHERE person_visit.id = 2;

#for ajax on delete ask for table update
